<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pour paupau l'asticot</title>
    <link rel="stylesheet" href="style_girly.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="citepauline.js" defer></script>
</head>
<body>
    <header>
        <h1>Pour Pauline
        </h1>
    </header>

    <main id="app">
        <h1 id="quote">Bienvenue !</h1>
        <p id="date"></p>
        <div id="waiting-message">
            <p>Les messages commenceront le <strong>1er janvier 2025</strong>. Ã‡a arrive vite !</p>
            <p class="subtext">En attendant, tu peux toujours m'Ã©crire ğŸ«¶ğŸ»</p>
        </div>

        <!-- Button to save favorite quote -->
        <button id="save-quote-button">Ajouter aux favoris</button>

        <!-- Button to view favorites -->
        <button id="view-favorites-button" onclick="location.href='favorites.html'">Voir les favoris</button>

        <!-- Button to view archive -->
        <button id="archive-button" onclick="location.href='archive.html'">Voir l'archive</button>
    </main>

    <footer>
        <p>Cadeau de NoÃ«l 2024</p>
        <!-- Dark mode toggle button -->
        <button id="dark-mode-toggle">Activer le mode sombre</button>
    </footer>

    <script>
        const quotes = [
            "quote 0",
            "Aujourd'hui c'est le premier jour, j'espÃ¨re que cette annÃ©e sera joyeuse pour toi ! T'inquiÃ¨te pas, je ne te lÃ¢cherais pas pendant 2025 !",
            "Complimente toi aujourd'hui, t'en vaux la peine ma biche",
            "Qui dit 3 janvier dit ski, j'espÃ¨re que t'es sur les pistes ma bichette",
            "Oublie pas de me demander des recommendations musicales aujourd'hui, j'ai des goÃ»ts de roi ",
            "Aujourd'hui, Ã§a fait 3 mois qu'on est amis, et j'ai jamais regrettÃ© ni une seule seconde ",
            "C'est le retour de l'Ã©cole mais aussi de voir tes amis ! Ne stresse pas trop pendant les examens, Ã§a en vaut pas la peine. Oublie pas et garde la tÃªte haute, t'es une personne gÃ©niale !",
            "Pas de message spÃ©cial aujourd'hui, juste s'il te plait ne stressse pas trop, et si c'est le cas parle en moi ",
            "T'es une amie incroyable, j'aime tellement ta prÃ©sence ! J'espÃ¨re que tu passes une tellement bonne journÃ©e ^^",
            "Tout le monde t'ADORE ma biche, moi le premier",
            "Oublie pas de mÃ©diter un petit moment aujourd'hui ",
            "Hehehe, rappelle toi du moment oÃ¹ je te disais que j'Ã©tais en train de faire ce cadeau, tu partais en cable.",
            "N'oublie jamais que comme l'homme a besoin d'oxygÃ¨ne pour vivre, il a besoin d'art et de poÃ©sie. Ouvre toi Ã  l'art aujourdhui, pense Ã  autre chose que les cours ğŸ«¶ğŸ»",
            "Au moins une personne aujourdhui a souri grÃ¢ce Ã  toi, et si y'a personne d'autre, cette personne Ã§a sera moi",
            "Hmm, je me demande quelle surprise je vais prÃ©parer pour dÃ©cembre...",
            "Oublie pas aujourd'hui de dire Ã  quelqu'un que tu les aime, c'est important",
            "T'inquiÃ¨te pas de ne pas rÃ©ussir, les seuls qui n'Ã©chouent pas c'est ceux qui font rien",
            "Je suis toujours fier de toi, surtout quand t'as survÃ©cu une semaine de plus dans ce CollÃ¨ge de mort.",
            "Vous jouez contre Lille aujourd'hui, attention Ã  pas perdre contre LES BETES ;)",
            "Je t'invite Ã  regarder good will hunting aujourdhui, c'est important ;)",
            "Oublie pas de rÃ©soudre une Ã©quation en plus aujourdhui ;)",
            "Oublie pas que les gens apprÃ©cient ta prÃ©sence, J'ESPERE QUE T'AS FAIT LEQUATION DE HIER",
            "J'ai hÃ¢te qu'on se revoie, mÃªme si j'Ã©cris ce message dans le passÃ© hehehhehhe",
            "Carpe Diem, profite de ta journÃ©e et tes amis/ies",
            "Je pense fort Ã  toi en fin de semaine, c'est la derniÃ¨re ligne droite, courage mv !",
            "Si tu te sens nulle, oublie pas que t'as une photo avec MALDINI",
            "Petit rappel de reregarder OU LIRE dead poets society ;)",
            "Je suis trÃ¨s heureux de t'avoir rencontrÃ©, et d'avoir l'occasion de te parler chaque jour",
            "Faites de chaque instant un souvenir prÃ©cieux.",
            "Faisons un petit rappel, VÃ©troz c'est pas le Valais, c'est les frouzes",
            "Le savais-tu, les kiwis (oiseaux) sont tellement mal faits par la nature que leurs oeuf fais la taille de leur corps, conclusion ils se dÃ©truisent le fiac",
            "Fin du mois !!!! Plus que 5 mois de cours ma biche j'espÃ¨re que t'as hÃ¢te"
        ];

        function getQuoteOfTheDay(date) {
            const startOfYear = new Date(Date.UTC(date.getFullYear(), 0, 1));
            const currentUTCDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
            const dayOfYear = Math.floor((currentUTCDate - startOfYear) / (1000 * 60 * 60 * 24));
            return quotes[dayOfYear % quotes.length];
        }

        function getQuoteState(fixedDate = null) {
            const now = fixedDate || new Date();
            const startDate = new Date('2025-01-01T00:00:00');
            if (now >= startDate) {
                return {
                    showQuote: true,
                    dailyQuote: getQuoteOfTheDay(now),
                    displayDate: `Citation pour le ${now.toLocaleDateString()}`
                };
            } else {
                return { showQuote: false };
            }
        }

        function renderQuote({ showQuote, dailyQuote, displayDate }) {
            const quoteElement = document.getElementById("quote");
            const dateElement = document.getElementById("date");
            const waitingMessage = document.getElementById("waiting-message");

            if (showQuote) {
                quoteElement.style.display = "block";
                waitingMessage.style.display = "none";
                quoteElement.textContent = dailyQuote;
                dateElement.textContent = displayDate;
                dateElement.style.display = "block";
            } else {
                quoteElement.style.display = "none";
                waitingMessage.style.display = "block";
            }
        }

        function updateQuote(fixedDate = null) {
    const quoteState = getQuoteState(fixedDate);
    renderQuote(quoteState);

    // Fill archive with missing quotes
    const quotesArchive = JSON.parse(localStorage.getItem('quotesArchive')) || [];
    const archiveDates = quotesArchive.map(entry => entry.date);
    const today = new Date();
    const startDate = new Date('2025-01-01');

    for (let d = startDate; d <= today; d.setDate(d.getDate() + 1)) {
        const dateString = d.toLocaleDateString();
        if (!archiveDates.includes(dateString)) {
            const dailyQuote = getQuoteOfTheDay(new Date(d));
            quotesArchive.push({ date: dateString, message: dailyQuote });
        }
    }

    localStorage.setItem('quotesArchive', JSON.stringify(quotesArchive));

    // Save today's quote to the archive
    if (quoteState.showQuote) {
        const todayDate = today.toLocaleDateString();
        const janFirst2025 = new Date('2025-01-01');
        if (!archiveDates.includes(todayDate) && today >= janFirst2025) {
            quotesArchive.push({ date: todayDate, message: quoteState.dailyQuote });
            localStorage.setItem('quotesArchive', JSON.stringify(quotesArchive));
        }
    }
}

        function setMidnightTimer() {
            const now = new Date();
            const msUntilMidnight =
                new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0) - now;

            setTimeout(() => {
                updateQuote();
                setInterval(updateQuote, 24 * 60 * 60 * 1000);
            }, msUntilMidnight);
        }

        updateQuote();
        setMidnightTimer();
    </script>
</body>
</html>
